# Proposal: æ·»åŠ æŒ‰é’®ç‚¹å‡»éŸ³æ•ˆ

## Why

å½“å‰åº”ç”¨åœ¨æŒ‰é’®äº¤äº’æ—¶æ²¡æœ‰å£°éŸ³åé¦ˆã€‚å¯¹äºé¢å‘å¹¼å„¿å’Œå°å­¦ä½å¹´çº§å„¿ç«¥ï¼ˆ1-15å²ï¼‰çš„è¯†å­—æ£€æµ‹åº”ç”¨ï¼ŒéŸ³æ•ˆåé¦ˆèƒ½æ˜¾è‘—æå‡äº¤äº’ä½“éªŒï¼š

1. **æ„Ÿå®˜åé¦ˆ**ï¼šæŒ‰é’®ç‚¹å‡»éŸ³æ•ˆè®©æ“ä½œæ„ŸçŸ¥æ›´æ˜ç¡®ï¼Œå°¤å…¶å¯¹ä½é¾„å„¿ç«¥è‡³å…³é‡è¦
2. **æ­£å‘/è´Ÿå‘åé¦ˆ**ï¼šæµ‹è¯•é¡µ"æˆ‘è®¤è¯†"/"ä¸è®¤è¯†"æŒ‰é’®åˆ†åˆ«ä½¿ç”¨ä¸åŒéŸ³æ•ˆï¼ˆsuccess/failï¼‰ï¼Œå¼ºåŒ–è®¤çŸ¥
3. **èµ„æºå·²å°±ç»ª**ï¼š`src/static/audio/` ä¸‹å·²æœ‰ä¸‰ä¸ª mp3 æ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨

## What Changes

### æ–°å¢éŸ³é¢‘ç®¡ç†å·¥å…·

åœ¨ `src/utils/` ä¸‹æ–°å¢ `audioManager.js` å·¥å…·æ¨¡å—ï¼Œå°è£…éŸ³é¢‘æ’­æ”¾é€»è¾‘ï¼š

- ä½¿ç”¨ `uni.createInnerAudioContext` åˆ›å»ºéŸ³é¢‘å®ä¾‹ï¼ˆæ¨èå¼€å¯ `useWebAudioImplement` æå‡çŸ­éŸ³é¢‘æ€§èƒ½ï¼‰
- iOS ä¸‹è®¾ç½® `obeyMuteSwitch = false`ï¼Œä¸éµå¾ªç³»ç»Ÿé™éŸ³å¼€å…³
- é‡‡ç”¨**å®ä¾‹æ± **æ¨¡å¼ï¼šä¸ºæ¯ç§éŸ³æ•ˆé¢„åˆ›å»ºç‹¬ç«‹çš„ `InnerAudioContext` å®ä¾‹ï¼Œé¿å…å¿«é€Ÿç‚¹å‡»æ—¶éŸ³æ•ˆè¦†ç›–
- å¿«é€Ÿè¿ç»­ç‚¹å‡»æ—¶ï¼šåœæ­¢å½“å‰æ’­æ”¾ â†’ é‡ç½®æ’­æ”¾ä½ç½® â†’ ç«‹å³é‡æ–°æ’­æ”¾ï¼ˆ`stop()` + `seek(0)` + `play()`ï¼‰
- ç»Ÿä¸€åœ¨åº”ç”¨/é¡µé¢å¸è½½æ—¶é”€æ¯æ‰€æœ‰éŸ³é¢‘å®ä¾‹ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼
- ä½¿ç”¨æ¡ä»¶ç¼–è¯‘ `#ifdef MP-WEIXIN` é™å®šå¾®ä¿¡å°ç¨‹åºå¹³å°

### åº”ç”¨æŒ‰é’®éŸ³æ•ˆ

| éŸ³æ•ˆæ–‡ä»¶ | è§¦å‘åœºæ™¯ | æ¶‰åŠé¡µé¢/ç»„ä»¶ |
|---------|---------|-------------|
| `button-pressed.mp3` | å¾®ä¿¡å°ç¨‹åºæ‰€æœ‰é€šç”¨æŒ‰é’®/å¯ç‚¹å‡»å…ƒç´ ç‚¹å‡» | è§ä¸‹æ–¹å®Œæ•´æ¸…å• |
| `success.mp3` | æµ‹è¯•é¡µ"æˆ‘è®¤è¯†"æŒ‰é’®ç‚¹å‡» | `test.vue` |
| `fail.mp3` | æµ‹è¯•é¡µ"ä¸è®¤è¯†"æŒ‰é’®ç‚¹å‡» | `test.vue` |

### é€šç”¨æŒ‰é’®éŸ³æ•ˆå®Œæ•´è§¦å‘æ¸…å•ï¼ˆbutton-pressed.mp3ï¼‰

#### é¦–é¡µ home.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "ç§‘å­¦åŸç†æŸ¥çœ‹è¯·å‚è€ƒğŸ‘‰" é“¾æ¥ | `goToPrinciple` | è·³è½¬åˆ°ç§‘å­¦åŸç†é¡µ |
| "ğŸš€ å¼€å§‹æ£€æµ‹å§ï¼ ğŸ‰" æŒ‰é’® | `startTest` | è·³è½¬åˆ°æ£€æµ‹é¡µ |

#### æµ‹è¯•é¡µ test.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| ç†”æ–­å¼¹çª— "æŸ¥çœ‹ç»“æœ" æŒ‰é’® | `goToResult` | è·³è½¬åˆ°ç»“æœé¡µ |

#### ç»“æœé¡µ result.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "ğŸ  ç»“æŸæ£€æµ‹" æŒ‰é’® | `endTest` | ä¿å­˜è®°å½•å¹¶è¿”å›é¦–é¡µ |

#### ä¸ªäººé¡µ profile.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| å¤´åƒåŒºåŸŸ | `handleAvatarClick` | é€‰æ‹©/æ›´æ¢å¤´åƒ |
| æ˜µç§°åŒºåŸŸ | `handleNicknameClick` | èšç„¦æ˜µç§°è¾“å…¥æ¡†ç¼–è¾‘ |
| å¹´é¾„é€‰æ‹©å™¨ | `onAgeChange` | picker é€‰æ‹©å¹´é¾„ |
| "ğŸ¤– AIè¾…å¯¼" æŒ‰é’® | `goToAiAssistant` | è·³è½¬åˆ° AI åŠ©æ‰‹é¡µ |
| å†å²è®°å½•åˆ—è¡¨é¡¹ | `goToDetail(record.id)` | æŸ¥çœ‹å†å²æ£€æµ‹è¯¦æƒ… |
| ç”Ÿå­—æœ¬å…¥å£å¡ç‰‡ | `goToVocabularyNotebook` | è·³è½¬åˆ°ç”Ÿå­—æœ¬é¡µ |
| å¼•å¯¼å¼¹çª— "æˆ‘çŸ¥é“äº†" æŒ‰é’® | `closeGuideModal` | å…³é—­å¼•å¯¼å¼¹çª— |

#### ç”Ÿå­—æœ¬é¡µ vocabulary-notebook.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "â† è¿”å›" å¯¼èˆªæŒ‰é’® | `goBack` | è¿”å›ä¸Šä¸€é¡µ |
| ç”Ÿå­—å¡ç‰‡ï¼ˆv-for å¾ªç¯ï¼‰ | `handleCharTap(char)` | è¿›å…¥å­¦ä¹ æ¨¡å¼ |

#### å†å²è¯¦æƒ…é¡µ history-detail.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "â† è¿”å›" å¯¼èˆªæŒ‰é’® | `goBack` | è¿”å›ä¸Šä¸€é¡µ |

#### ç§‘å­¦åŸç†é¡µ science-principle.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "â† è¿”å›" å¯¼èˆªæŒ‰é’® | `goBack` | è¿”å›ä¸Šä¸€é¡µ |

#### AI åŠ©æ‰‹é¡µ ai-assistant.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "â† è¿”å›" å¯¼èˆªæŒ‰é’® | `goBack` | è¿”å›ä¸Šä¸€é¡µ |
| "â¤" å‘é€æŒ‰é’® | `sendMessage` | å‘é€æ¶ˆæ¯ |
| H5 æç¤ºå¼¹çª— "æˆ‘çŸ¥é“äº†" æŒ‰é’® | `showH5Tip = false` | å…³é—­æç¤ºï¼ˆä»… H5ï¼‰ |

#### CustomTabBar.vue
| ç»„ä»¶ | å¤„ç†å‡½æ•° | è¯´æ˜ |
|------|---------|------|
| "ğŸ  é¦–é¡µ" æ ‡ç­¾ | `switchTab('home')` | åˆ‡æ¢åˆ°é¦–é¡µ |
| "ğŸ‘¤ æˆ‘çš„" æ ‡ç­¾ | `switchTab('profile')` | åˆ‡æ¢åˆ°ä¸ªäººé¡µ |

> **æ³¨æ„**ï¼šå¼¹çª—é®ç½©å±‚ç‚¹å‡»å…³é—­ï¼ˆprofile.vue `closeGuideModal` é®ç½©ã€ai-assistant.vue H5 æç¤ºé®ç½©ï¼‰ä»¥åŠ `@tap.stop` é˜»æ­¢å†’æ³¡çš„å…ƒç´ ä¸éœ€è¦æ’­æ”¾éŸ³æ•ˆã€‚H5 ä¸“å±çš„æç¤ºå¼¹çª—æŒ‰é’®å› åªåœ¨ H5 å¹³å°æ˜¾ç¤ºï¼Œä¸”éŸ³æ•ˆä»…åœ¨å¾®ä¿¡å°ç¨‹åºç”Ÿæ•ˆï¼Œå› æ­¤æ— éœ€ç‰¹æ®Šå¤„ç†ã€‚

### æ¶‰åŠèŒƒå›´

- **æ–°å¢**ï¼š`src/utils/audioManager.js` â€” éŸ³é¢‘ç®¡ç†å·¥å…·
- **ä¿®æ”¹**ï¼š`src/pages/test/test.vue` â€” æµ‹è¯•é¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/home/home.vue` â€” é¦–é¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/result/result.vue` â€” ç»“æœé¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/profile/profile.vue` â€” ä¸ªäººé¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/vocabulary-notebook/vocabulary-notebook.vue` â€” ç”Ÿå­—æœ¬é¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/history-detail/history-detail.vue` â€” å†å²è¯¦æƒ…é¡µè¿”å›æŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/science-principle/science-principle.vue` â€” ç§‘å­¦åŸç†é¡µè¿”å›æŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/pages/ai-assistant/ai-assistant.vue` â€” AI åŠ©æ‰‹é¡µæŒ‰é’®éŸ³æ•ˆ
- **ä¿®æ”¹**ï¼š`src/components/CustomTabBar.vue` â€” TabBar åˆ‡æ¢éŸ³æ•ˆ
- **è§„èŒƒ**ï¼šæ–°å¢ `components` è§„èŒƒä¸­çš„éŸ³é¢‘ç®¡ç† requirement

## Impact

- **ç”¨æˆ·å½±å“**ï¼šæŒ‰é’®ç‚¹å‡»æ—¶æœ‰å³æ—¶å£°éŸ³åé¦ˆï¼Œæå‡å„¿ç«¥äº¤äº’ä½“éªŒ
- **å¹³å°é™åˆ¶**ï¼šä»…å¾®ä¿¡å°ç¨‹åºç”Ÿæ•ˆï¼ŒH5 åŠå…¶ä»–å¹³å°æ— å½±å“ï¼ˆæ¡ä»¶ç¼–è¯‘éš”ç¦»ï¼‰
- **æ€§èƒ½å½±å“**ï¼šé¢„åˆ›å»ºéŸ³é¢‘å®ä¾‹ï¼Œå†…å­˜å¼€é”€æå°ï¼ˆ3 ä¸ª mp3 æ–‡ä»¶æ€»è®¡çº¦ 68KBï¼‰
- **å‘åå…¼å®¹**ï¼šçº¯å¢é‡åŠŸèƒ½ï¼Œä¸å½±å“ç°æœ‰é€»è¾‘
