---
title: 页面规范
status: proposed
created: 2026-01-05
capability: pages
---

# 页面规范

## ADDED Requirements

### Requirement: 首页 (HomePage)

首页作为应用入口，展示不同年龄段的认字量参考区间，引导用户开始检测。

#### Scenario: 用户查看认字量参考区间

**Given** 用户打开应用进入首页
**When** 页面加载完成
**Then** 显示渐变背景（粉紫蓝渐变）
**And** 显示欢迎图片和标题"🎓 汉字认字量检测 📚"
**And** 显示副标题"一起来测测认识多少字吧！"
**And** 显示 5 个年龄段认字量卡片：
  - 4-5岁：目标认字量 50-100 个汉字
  - 5-6岁：目标认字量 200-300 个汉字
  - 幼小衔接：目标认字量 300-500 个汉字
  - 1～2年级：目标认字量 1600 左右个汉字
  - 3～4年级：目标认字量 2500 左右个汉字

#### Scenario: 用户开始检测

**Given** 用户在首页
**When** 用户点击"🚀 开始检测吧！🎉"按钮
**Then** 跳转到检测页面

---

### Requirement: 检测页 (TestPage)

检测页展示待测汉字，用户判断是否认识，记录检测结果，支持分层测试和动态熔断机制。

#### Scenario: 用户进行汉字检测

**Given** 用户从首页进入检测页
**When** 页面加载完成
**Then** 加载汉字数据 (top_2500_chars_with_literacy.json)
**And** 按分层策略生成 175 字测试序列
**And** 显示当前层级"L1 绝对核心字"
**And** 显示当前进度"第 1 / 50 个"（当前层级内）
**And** 显示总进度"总进度: 1 / 175"
**And** 显示已认识计数"已认识: 0 个 ✅"
**And** 显示进度条
**And** 在米字格中居中展示一个汉字（黑体 120px）
**And** 显示"✅ 我认识"和"❌ 不认识"两个按钮
**And** 显示鼓励语"💪 加油哦！继续努力！"

#### Scenario: 用户点击"我认识"

**Given** 用户在检测页查看汉字
**When** 用户点击"✅ 我认识"按钮
**Then** 当前层级认识计数加 1
**And** 重置连续不认识计数为 0
**And** 进度条更新
**And** 显示下一个汉字
**And** 当前进度数字加 1

#### Scenario: 用户点击"不认识"

**Given** 用户在检测页查看汉字
**When** 用户点击"❌ 不认识"按钮
**Then** 将当前汉字记录到不认识列表
**And** 当前层级不认识计数加 1
**And** 连续不认识计数加 1
**And** 检查熔断条件
**And** 进度条更新
**And** 显示下一个汉字（若未熔断）

#### Scenario: 层级切换

**Given** 用户完成当前层级所有测试字
**When** 当前层级测试完成且未触发熔断
**Then** 自动切换到下一层级
**And** 更新层级显示（如"L2 高频基础字"）
**And** 重置当前层级进度为"第 1 / 50 个"
**And** 重置连续不认识计数为 0

#### Scenario: 触发连续不认识熔断

**Given** 用户在某层级连续 5 个汉字点击"不认识"
**When** 连续不认识计数达到 5
**Then** 显示熔断提示"检测到连续不认识，提前结束测试"
**And** 标记当前层级为熔断状态
**And** 跳过后续所有层级
**And** 自动跳转到结果页

#### Scenario: 触发错误率熔断

**Given** 用户在某层级测试了至少 5 个字
**When** 当前层级错误率超过 80%
**Then** 显示熔断提示"当前层级错误率过高，提前结束测试"
**And** 标记当前层级为熔断状态
**And** 跳过后续所有层级
**And** 自动跳转到结果页

#### Scenario: 检测完成（无熔断）

**Given** 用户已完成所有 6 个层级共 175 个汉字的判断
**When** 用户点击最后一个汉字的按钮
**Then** 自动跳转到结果页
**And** 传递完整的分层测试数据

---

### Requirement: 结果页 (ResultPage)

结果页展示检测结果，包括预估认字量、分层详情和不认识的汉字列表。

#### Scenario: 用户查看检测结果

**Given** 用户完成检测进入结果页
**When** 页面加载完成
**Then** 显示"🎊"图标
**And** 显示"检测完成！"标题
**And** 显示金色结果卡片，包含：
  - "你的认字量大约是"
  - 预估认字量数字（紫色大号字体，按权重公式计算）
  - "个汉字 📚"
**And** 显示分层测试详情（各层级认识数/测试数）
**And** 显示"📝 需要加强的汉字"区域
**And** 显示不认识的汉字卡片列表
**And** 显示鼓励语
**And** 显示"🏠 结束检测"按钮

#### Scenario: 用户查看熔断结果

**Given** 用户因熔断提前结束检测
**When** 页面加载完成
**Then** 显示熔断提示"⚠️ 测试在 L{x} 层级提前结束"
**And** 显示实际测试字数
**And** 后续未测层级显示为"未测试"

#### Scenario: 认字量计算

**Given** 用户完成检测
**When** 计算认字量
**Then** 按公式计算：W = N_L1 + (N_L2 × 3) + (N_L3 × 10) + (N_L4 × 20) + (N_L5 × 50) + (N_L6 × 100)
**And** 熔断后未测层级计为 0

#### Scenario: 用户结束检测

**Given** 用户在结果页
**When** 用户点击"🏠 结束检测"按钮
**Then** 保存检测记录到本地存储（含分层详情和熔断信息）
**And** 跳转回首页（TabBar 首页）

---

### Requirement: 个人页 (ProfilePage)

个人页展示用户信息、统计数据和历史检测记录。

#### Scenario: 用户查看个人信息

**Given** 用户点击 TabBar 进入个人页
**When** 页面加载完成
**Then** 显示用户信息卡片（渐变背景）：
  - 用户头像“https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0”
  - 昵称"点击设置小朋友昵称"
  - 账号"账号：user_001"

#### Scenario: 用户查看统计数据

**Given** 用户在个人页
**When** 页面加载完成
**Then** 显示三个统计卡片：
  - 📊 检测次数
  - 🏆 最高记录
  - 📈 平均认字

#### Scenario: 用户查看历史记录

**Given** 用户在个人页
**When** 页面加载完成
**Then** 显示"📚 历史检测记录"标题
**And** 显示历史记录列表，每条记录包含：
  - 检测时间
  - 📊 认字量数值
  - 需加强汉字数（如有）
  - 👉 指示图标

#### Scenario: 用户点击历史记录

**Given** 用户在个人页查看历史记录列表
**When** 用户点击某条历史记录
**Then** 跳转到历史详情页
**And** 传递记录 ID

---

### Requirement: 历史详情页 (HistoryDetailPage)

历史详情页展示单次检测的完整信息。

#### Scenario: 用户查看历史详情

**Given** 用户从个人页点击历史记录进入详情页
**When** 页面加载完成
**Then** 显示"← 返回"按钮
**And** 显示检测信息卡片（渐变背景）：
  - 检测时间
  - "当时的认字量"
  - 认字量数字
  - "个汉字 📚"
**And** 显示"📝 当时不认识的汉字"区域
**And** 显示不认识的汉字卡片列表
**And** 显示鼓励语"💪 现在都认识这些字了吗？"
**And** 显示"继续努力，你一定会越来越棒！"

#### Scenario: 用户返回个人页

**Given** 用户在历史详情页
**When** 用户点击"← 返回"按钮
**Then** 返回个人页
