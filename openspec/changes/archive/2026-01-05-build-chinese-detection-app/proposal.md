---
title: 构建汉字认字量检测小程序
status: proposed
created: 2026-01-05
updated: 2026-01-05
author: AI Assistant
---

# 构建汉字认字量检测小程序

## 概述

基于 Figma 设计稿，构建一个完整的汉字认字量检测微信小程序。该应用帮助儿童和家长测试识字能力，通过展示汉字让用户判断是否认识，最终计算出预估的认字量。

## 背景

- **目标用户**: 4-10岁儿童及其家长
- **核心功能**: 汉字认字量检测、历史记录查看
- **技术栈**: uni-app + Vue 3 Composition API
- **目标平台**: 微信小程序（兼顾 H5）

## 功能范围

### 包含的功能

1. **首页** - 展示不同年龄段认字量参考区间，引导用户开始检测
2. **检测页** - 米字格展示汉字，用户判断是否认识
3. **结果页** - 展示检测结果和不认识的汉字列表
4. **个人页** - 用户信息、历史检测统计和记录列表
5. **历史详情页** - 查看单次检测的详细信息

### 不包含的功能

- 用户登录/注册（使用 Mock 用户数据）
- 后端服务（使用本地 Mock 数据）
- 汉字发音/笔画动画
- 社交分享功能

## 设计参考

所有页面基于 Figma 设计稿实现：
- 首页: node-id=1:201
- 检测页: node-id=1:374
- 结果页: node-id=1:400
- 个人页: node-id=1:300
- 历史详情页: node-id=1:430

## 技术方案

### 前端架构

- **框架**: uni-app 3.0 + Vue 3.4 Composition API
- **样式**: 原生 CSS + rpx 响应式单位
- **状态管理**: Vue 3 响应式 API (ref/reactive)
- **平台兼容**: 使用 `#ifdef` 条件编译处理平台差异

### API 设计

采用 Mock 机制，API 返回标准化格式：
```typescript
interface ApiResponse<T> {
  errCode: number;    // 0 表示成功
  errMsg: string;     // 错误信息
  data: T;            // 业务数据
}
```

### 数据模型

- **Character**: 汉字数据（基于 `top_2500_chars_with_literacy.json`，包含 rank_id、char、frequency、frequency_cumulative）
- **LevelConfig**: 分层配置（6 个层级，定义抽样间隔和权重）
- **TestRecord**: 检测记录（时间、认字量、分层详情、不认识的字、熔断信息）
- **User**: 用户信息（头像、昵称、账号）

### 认字量计算算法

采用**分层频率抽样测试策略**：

| 层级 | 字频排名范围 | 抽样间隔 | 测试字数 | 权重 |
|------|-------------|---------|---------|------|
| L1 | 第 1-50 字 | 1抽1 | 50字 | ×1 |
| L2 | 第 51-200 字 | 3抽1 | 50字 | ×3 |
| L3 | 第 201-500 字 | 10抽1 | 30字 | ×10 |
| L4 | 第 501-1000 字 | 20抽1 | 25字 | ×20 |
| L5 | 第 1001-1500 字 | 50抽1 | 10字 | ×50 |
| L6 | 第 1501-2500 字 | 100抽1 | 10字 | ×100 |
| **合计** | - | - | **175字** | - |

**计算公式**：
$$W = N_{L1} + (N_{L2} \times 3) + (N_{L3} \times 10) + (N_{L4} \times 20) + (N_{L5} \times 50) + (N_{L6} \times 100)$$

### 动态熔断机制

为提升测试效率，设置动态熔断：
- **连续不认识熔断**: 任意层级连续 5 个字不认识
- **错误率熔断**: 任意层级错误率超过 80%
- **处理**: 假设当前层级剩余未测字及后续所有层级的字都不认识（计为 0 分）

## 影响分析

### 新增文件

- 5 个页面文件
- 3 个公共组件
- 1 个 API 模块
- 1 个工具函数模块（含认字量计算、熔断检测、测试序列生成）
- 汉字数据使用现有 `src/static/top_2500_chars_with_literacy.json`

### 修改文件

- `src/pages.json` - 添加页面路由和 TabBar 配置
- `src/manifest.json` - 配置应用信息

## 风险与缓解

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 汉字字库覆盖不全 | 检测准确性 | 使用分级汉字库，覆盖常用汉字 |
| 小程序包体积超限 | 发布失败 | 分包加载、压缩资源 |
| 低端设备性能问题 | 用户体验差 | 优化渲染、减少动画 |

## 成功标准

1. 所有页面按设计稿还原，视觉还原度 > 95%
2. 检测流程完整可用
3. 微信小程序和 H5 平台正常运行
4. 代码符合 uni-app 最佳实践
