# 变更提案: 添加微信小程序分享功能

## 变更 ID
`add-wechat-share`

## 状态
Complete

## Why

当前小程序缺少分享功能，用户无法将检测结果或小程序分享给好友和朋友圈。添加分享功能可以：

1. **提升用户传播**：家长可以分享孩子的检测结果，增加小程序曝光
2. **增强社交互动**：支持分享到微信好友和朋友圈，扩大用户群体
3. **完善用户体验**：符合微信小程序的标准交互模式

## What Changes

### 功能概述

为小程序添加微信分享能力，支持：
- 点击右上角菜单分享给好友
- 点击右上角菜单分享到朋友圈
- 结果页自定义分享内容（包含检测结果）

### 涉及页面

| 页面 | 分享好友 | 分享朋友圈 | 分享内容 |
|------|---------|-----------|---------|
| 首页 (home) | ✅ | ✅ | 小程序介绍 |
| 检测页 (test) | ❌ | ❌ | 不支持（测试中不打断） |
| 结果页 (result) | ✅ | ✅ | 检测结果 + 认字量 |
| 个人页 (profile) | ✅ | ✅ | 小程序介绍 |
| 历史详情页 | ✅ | ✅ | 历史检测结果 |

### 技术方案

1. **使用 uni-app 生命周期钩子**：`onShareAppMessage` 和 `onShareTimeline`
2. **条件编译**：通过 `#ifdef MP-WEIXIN` 处理微信小程序特有逻辑
3. **自定义分享内容**：标题、路径、图片

## Affected Specs

- 新增: `share-capability` - 分享功能规范

## Dependencies

无外部依赖，使用微信小程序原生分享 API。

## Risks

- **朋友圈分享限制**：朋友圈分享进入的是"单页模式"，部分功能受限（如登录态、TabBar 不渲染）
- **H5 兼容性**：H5 环境不支持微信分享 API，需要条件编译处理
